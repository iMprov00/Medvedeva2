<<section class="py-4 py-lg-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto text-center">
                <h1 class="fw-bold mb-3 fade-in-up" style="font-size: clamp(1.75rem, 4vw, 2.5rem);">Наши врачи</h1>
                <p class="lead text-muted mb-0 fade-in-up" style="animation-delay: 0.1s; font-size: clamp(1rem, 2vw, 1.25rem);">
                    Профессиональная команда специалистов, которые помогут вам и вашему ребенку сохранить здоровье
                </p>
                
                <!-- Добавленное сообщение об онлайн-записи -->
                <div class="alert alert-info mt-4 fade-in-up mx-auto" style="animation-delay: 0.2s; max-width: 800px;">
                    <div class="d-flex align-items-center">
                        <div class="me-3">
                            <i class="bi bi-tools fs-4"></i>
                        </div>
                        <div class="text-start">
                            <p class="mb-1 fw-semibold">Онлайн-запись в разработке</p>
                            <p class="mb-0 small">
                                На текущий момент функция онлайн-записи находится в разработке. 
                                Вы можете выбрать врача и нажать кнопку "записаться", и наш администратор 
                                перезвонит вам для уточнения деталей и подтверждения времени приема.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Поиск и фильтры -->
<section class="py-4 py-lg-5">
    <div class="container">
        <div class="row g-3 mb-4 mb-lg-5">
            <div class="col-12 col-md-8">
                <div class="input-group input-group-lg">
                    <span class="input-group-text bg-white border-end-0">
                        <i class="bi bi-search text-muted"></i>
                    </span>
                    <input type="text" 
                           id="doctor-search" 
                           class="form-control border-start-0 form-control-lg" 
                           placeholder="Поиск врачей по ФИО..."
                           aria-label="Поиск врачей">
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="d-flex gap-2">
                    <select id="specialty-filter" class="form-select form-select-lg touch-target">
                        <option value="">Все специальности</option>
                        <% @specialties.each do |specialty| %>
                            <option value="<%= specialty %>"><%= specialty %></option>
                        <% end %>
                    </select>
                    <button id="reset-filters" class="btn btn-outline-secondary btn-lg px-3 touch-target">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Список врачей -->
        <div class="doctors-grid">
            <div class="row g-3 g-lg-4" id="doctors-list">
                <% if @doctors.empty? %>
                    <div class="col-12">
                        <div class="text-center py-5">
                            <div class="icon-wrapper icon-wrapper-secondary mx-auto mb-3" style="width: 80px; height: 80px;">
                                <i class="bi bi-people fs-2"></i>
                            </div>
                            <h4 class="fw-bold mb-3 fs-5">Врачи не найдены</h4>
                            <p class="text-muted small">Попробуйте изменить условия поиска</p>
                        </div>
                    </div>
                <% else %>
                    <% @doctors.each_with_index do |doctor, index| %>
                        <div class="col-12 col-sm-6 col-lg-4 fade-in-up">
                            <div class="card doctor-card shadow-sm border-0 h-100" data-doctor-index="<%= index %>">
                                <!-- Замените этот блок (строки ~40-70) в doctors.erb -->
                                <div class="position-relative doctor-photo-container overflow-hidden">
                                    <div class="doctor-photo-wrapper">
                                        <% if doctor.photo_path && !doctor.photo_path.empty? %>
                                            <!-- Убрали фоновый цвет -->
                                            <img src="<%= doctor.photo_path %>" 
                                                 class="doctor-photo" 
                                                 alt="Доктор <%= doctor.full_name %>"
                                                 loading="lazy">
                                        <% else %>
                                            <div class="text-center">
                                                <i class="bi bi-person-circle display-1 text-muted opacity-25"></i>
                                            </div>
                                        <% end %>
                                    </div>
                                    
                                    <% if doctor.experience_years && doctor.experience_years > 0 %>
                                        <span class="position-absolute top-0 end-0 m-3 badge bg-white text-primary rounded-pill shadow-sm small">
                                            <i class="bi bi-award me-1"></i><%= doctor.experience_text %>
                                        </span>
                                    <% end %>
                                </div>
                                
                                <div class="card-body d-flex flex-column p-3 p-lg-4">
                                    <h5 class="card-title fw-bold mb-2 fs-6"><%= doctor.full_name %></h5>
                                    
                                    <div class="mb-3">
                                        <% if doctor.specialties.any? %>
                                            <% doctor.specialties.each do |specialty| %>
                                                <span class="badge bg-secondary-light text-primary mb-1 me-1 small">
                                                    <%= specialty.name %>
                                                </span>
                                            <% end %>
                                        <% else %>
                                            <span class="badge bg-secondary-light text-primary mb-1 small">
                                                Специалист
                                            </span>
                                        <% end %>
                                    </div>
                                    
                                <p class="card-text text-muted flex-grow-1 mb-3 small">
    <%= doctor.bio.to_s.truncate(250) %> <!-- Увеличили с 100 до 180 -->
</p>
                                    
                                    <div class="mt-auto">
                                        <div class="d-grid">
                                            <a href="#" 
                                               class="btn btn-primary btn-sm btn-appointment touch-target" 
                                               data-doctor-id="<%= doctor.id %>" 
                                               data-doctor-name="<%= doctor.full_name %>">
                                              <i class="bi bi-calendar-check me-1"></i>Записаться
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% end %>
                <% end %>
            </div>
        </div>
    </div>
</section>

<style>
/* CSS для чередования цветов и анимаций */
.fade-in-up {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.5s ease forwards;
}

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}


/* Замените существующие стили для .card-body */
.card-body {
    display: flex;
    flex-direction: column;
    flex: 1 0 auto; /* Занимает доступное пространство */
}

.doctor-bio {
    line-height: 1.5;
    min-height: 80px;
}
<%# /* Чередование цветов фона для контейнеров с фото */
.bg-doctor-0 {
    background-color: #77e0b2;
}

.bg-doctor-1 {
    background-color: #e5a7ff;
}

.doctor-photo-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 240px;
    position: relative;
}

.doctor-photo-wrapper img {
    transition: transform 0.3s ease;
}

.doctor-card:hover .doctor-photo-wrapper img {
    transform: scale(1.05);
}

/* Стили для поиска */
#doctor-search:focus, #specialty-filter:focus {
    border-color: #e5a7ff;
    box-shadow: 0 0 0 0.25rem rgba(229, 167, 255, 0.25);
}

/* Адаптивность */
@media (max-width: 768px) {
    .doctor-photo-wrapper {
        min-height: 200px;
    }
    
    .doctor-card .doctor-photo-wrapper div[style] {
        height: 180px;
        max-width: 200px;
    }
}

@media (max-width: 576px) {
    .doctor-photo-wrapper {
        min-height: 180px;
    }
    
    .doctor-card .doctor-photo-wrapper div[style] {
        height: 160px;
        max-width: 180px;
    }
    
    .doctors-grid .col-12 {
        margin-bottom: 1rem;
    }
}

/* Touch улучшения */
@media (hover: none) and (pointer: coarse) {
    .doctor-card:hover .doctor-photo-wrapper img {
        transform: none;
    }
}

/* Плавная загрузка карточек */
.doctor-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.doctor-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1) !important;
}

/* Стили для мобильного поиска */
@media (max-width: 768px) {
    .input-group-lg .form-control,
    .input-group-lg .input-group-text {
        font-size: 1rem;
        padding: 0.75rem 1rem;
    }
    
    .form-select-lg {
        font-size: 1rem;
        padding: 0.75rem 2.25rem 0.75rem 1rem;
    }
} %>
</style>

